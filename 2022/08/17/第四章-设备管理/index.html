<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="拔丝地瓜">
    
    <title>
        
            第四章 设备管理 |
        
        拔丝地瓜
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202207121124025.svg">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"en","path":"search.json"};
    KEEP.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.jpg","favicon":"https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202207121124025.svg","article_img_align":"center","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving."},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":false},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":false},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 6.2.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>


<body>
<div class="progress-bar-container">
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                拔丝地瓜
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                分类
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">分类</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">第四章 设备管理</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">拔丝地瓜</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2022-08-17 15:03:58</span>
        <span class="mobile">2022-08-17 15:03</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1 id="第四章-设备管理"><a href="#第四章-设备管理" class="headerlink" title="第四章 设备管理"></a>第四章 设备管理</h1><h2 id="4-1-设备管理基础"><a href="#4-1-设备管理基础" class="headerlink" title="4.1 设备管理基础"></a>4.1 设备管理基础</h2><h3 id="4-1-1-设备管理概述"><a href="#4-1-1-设备管理概述" class="headerlink" title="4.1.1 设备管理概述"></a>4.1.1 设备管理概述</h3><h4 id="1-I-x2F-O设备"><a href="#1-I-x2F-O设备" class="headerlink" title="1. I/O设备"></a>1. I/O设备</h4><ul>
<li><p>I/O 系统是 I/O 设备及其接口线路、控制部件、通道和管理软件的统称</p>
</li>
<li><p>I/O 设备又称为外围设备或外部设备，简称外设</p>
<ul>
<li><p>用于计算机系统与外部世界（如用户、其他计算机或设备）的信息交换或存储</p>
</li>
<li><p>把外界信息输入计算机，把计算结果从计算机中输出，完成计算机之间的通信或人机交互</p>
</li>
</ul>
</li>
<li><p>I/O操作：内存和设备介质之间的信息传送操作</p>
<ul>
<li><p>影响计算机的通用性和可扩充性</p>
</li>
<li><p>计算机系统综合处理能力及性价比的重要因素</p>
</li>
</ul>
</li>
</ul>
<h4 id="2-I-x2F-O设备的分类"><a href="#2-I-x2F-O设备的分类" class="headerlink" title="2. I/O设备的分类"></a>2. I/O设备的分类</h4><p>按信息传输方向划分</p>
<ul>
<li><p>输入设备：将外界信息输入计算机</p>
<ul>
<li>例如：键盘，鼠标，扫描仪等</li>
</ul>
</li>
<li><p>输出设备：将计算结果输出</p>
<ul>
<li>例如：显示器，打印机等</li>
</ul>
</li>
<li><p>输入输出设备：既可以输入信息，也可以输出信息</p>
<ul>
<li>例如：磁盘驱动器，网卡等</li>
</ul>
</li>
</ul>
<p>按交互功能划分</p>
<ul>
<li>人机交互设备：用于用户与计算机之间的交互通信<ul>
<li>例如：鼠标，键盘，显示器等</li>
</ul>
</li>
<li>存储设备：持久性地存储大量信息并快速检索<ul>
<li>例如：磁盘驱动器，光盘驱动器等</li>
</ul>
</li>
<li>机机通信设备：用于计算机和计算机之间的通信<ul>
<li>例如：网卡，调制解调器等</li>
</ul>
</li>
</ul>
<p>按设备管理划分</p>
<ul>
<li><p>字符设备：以字符为单位进行信息交换，发送或接收一个字符流</p>
<ul>
<li>人机交互设备大多是字符设备，例如鼠标、显示器等</li>
</ul>
</li>
<li><p>块设备：以固定大小的数据块（块是存储介质上连续信息组成的一个区域）进行信息交换</p>
<ul>
<li>存储设备通常为块设备，例如磁盘驱动器等</li>
</ul>
</li>
<li><p>网络设备：用于与远程设备通信的设备</p>
<ul>
<li>机机通信设备为网络设备，例如网卡等</li>
<li>网络设备可以抽象为传送字符流的特殊字符设备，也可以抽象为传送连续小块数据的块设备</li>
</ul>
</li>
</ul>
<h4 id="3-设备管理的目标"><a href="#3-设备管理的目标" class="headerlink" title="3. 设备管理的目标"></a>3. 设备管理的目标</h4><ul>
<li>克服设备和 CPU 速度的不匹配所引起的问题，使主机和设备并行工作，提高设备使用效率</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208141437102.png" alt="4.1.1.3" style="zoom:33%;">

<ul>
<li>对设备进行抽象，屏蔽设备的物理细节和操作过程，配置驱动程序，提供统一界面，供用户或高层软件使用<ul>
<li>抽象为裸设备：不被操作系统直接管理，由应用程序读写，I/O 效率更高</li>
<li>抽象为设备文件：文件系统中的节点，统一管理</li>
</ul>
</li>
</ul>
<h4 id="4-设备管理的功能"><a href="#4-设备管理的功能" class="headerlink" title="4. 设备管理的功能"></a>4. 设备管理的功能</h4><ul>
<li>设备中断处理</li>
<li>缓冲区管理</li>
<li>设备的分配和去配</li>
<li>设备驱动调度</li>
<li>实现虚拟设备</li>
</ul>
<h4 id="5-设备管理的层次"><a href="#5-设备管理的层次" class="headerlink" title="5. 设备管理的层次"></a>5. 设备管理的层次</h4><ul>
<li>I/O 硬件：I/O 设备及其接口线路、控制部件、通道</li>
<li>I/O 软件：系统 I/O 软件、用户空间 I/O 软件</li>
</ul>
<h3 id="4-1-2-I-x2F-O控制方式"><a href="#4-1-2-I-x2F-O控制方式" class="headerlink" title="4.1.2 I/O控制方式"></a>4.1.2 I/O控制方式</h3><h4 id="1-设备控制器"><a href="#1-设备控制器" class="headerlink" title="1. 设备控制器"></a>1. 设备控制器</h4><ul>
<li>为达到模块化和通用性的设计目标，通常将 I/O 设备中的机械部件和电子部件分开处理<ul>
<li>机械部件是指设备本身</li>
<li>电子部件称为设备控制器<ul>
<li>又称为设备适配器、I/O 控制器、I/O 控制接口，简称 I/O 模块或 I/O接口</li>
</ul>
</li>
</ul>
</li>
<li>操作系统与设备控制器交互，而非与设备交互<ul>
<li>多数微型和小型计算机系统通过单总线模式来交互</li>
<li>大中型计算机采用多总线结构和多通道方式来交互</li>
</ul>
</li>
<li>设备控制器具体控制设备进行 I/O，将串行的位流装配成字节，存入控制器内部的缓冲区形成字节块，在校验和确认无错后，这块数据将被复制进入内存</li>
<li>设备控制器的功能：CPU 与设备之间的接口<ul>
<li>接收和识别 CPU 或通道发来的命令</li>
<li>实现数据交换</li>
<li>发现和记录设备及自身的状态信息，供 CPU 处理使用</li>
<li>当连接多台设备时，识别设备地址</li>
</ul>
</li>
<li>设备控制器的组成部分<ul>
<li>状态/控制寄存器</li>
<li>数据缓冲寄存器</li>
<li>地址译码器和 I/O 控制逻辑</li>
<li>外设接口控制逻辑</li>
</ul>
</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208141722968.png" alt="4.1.2.1" style="zoom:25%;">

<h4 id="2-I-x2F-O控制方式"><a href="#2-I-x2F-O控制方式" class="headerlink" title="2. I/O控制方式"></a>2. I/O控制方式</h4><p>I/O 控制方式可分为4类：轮询方式、中断方式、DMA 方式和通道方式</p>
<ul>
<li>它们的差别在于 CPU 与设备并行工作的方式和程度不同</li>
<li>轮询方式中 CPU 全程参与 I/O 操作</li>
<li>中断方式相比轮询方式减少了 CPU 参与 I/O 操作的工作</li>
<li>DMA 与通道方式可以在没有 CPU 参与的情况下完成 I/O 操作<ul>
<li>该过程将 CPU 从 I/O 操作中彻底解放出来，从而消除了系统性能瓶颈</li>
</ul>
</li>
</ul>
<h4 id="3-轮询方式"><a href="#3-轮询方式" class="headerlink" title="3. 轮询方式"></a>3. 轮询方式</h4><p>轮询方式的处理流程：</p>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208141536199.png" alt="4.1.2.3" style="zoom:25%;">

<ul>
<li>处理器向控制器发送一个 I/O 命令</li>
<li>如果设备未就绪，则重复测试过程，直至设备就绪</li>
<li>执行数据交换</li>
<li>等待 I/O 操作完成后，才可以继续其它操作</li>
</ul>
<p>轮询方式的特点：</p>
<ul>
<li>处理 I/O 请求会终止原程序的执行</li>
<li>CPU 需要等待 I/O 设备就绪</li>
<li>CPU 需要参与数据传送</li>
<li>CPU 和设备只能串行工作，效率低下</li>
</ul>
<h4 id="4-中断方式"><a href="#4-中断方式" class="headerlink" title="4. 中断方式"></a>4. 中断方式</h4><p>中断方式的处理流程：</p>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208141537439.png" alt="4.1.2.4" style="zoom:25%;">

<ul>
<li>处理器向控制器发出一个 I/O 命令，然后继续执行后续指令<ul>
<li>如果该进程不需要等待 I/O 完成， 后续指令可以仍是该进程中的指令</li>
<li>否则，该进程在这个中断上挂起， 处理器执行其他工作</li>
</ul>
</li>
<li>控制器检查设备状态，就绪后发起中断</li>
<li>CPU 响应中断，转向中断处理程序</li>
<li>中断处理程序执行数据读写操作</li>
<li>恢复执行原先的程序</li>
</ul>
<p>中断方式的特点：</p>
<ul>
<li>响应中断后会终止原程序的执行</li>
<li>CPU 不需要等待 I/O 设备就绪</li>
<li>CPU 需要参与数据传送</li>
<li>CPU 和设备部分并行操作，效率有所提高</li>
</ul>
<h4 id="5-DMA方式"><a href="#5-DMA方式" class="headerlink" title="5. DMA方式"></a>5. DMA方式</h4><p>DMA模块：模仿处理器来控制主存和设备控制器之间的数据交换</p>
<ul>
<li>内存地址寄存器：存放内存中需要交换数据的地址，DMA 传送之前由程序送入首地址；DMA 传送过程中，每次交换数据都把地址寄存器的内容加 1</li>
<li>字计数器：记录传送数据的总字数，每次传送一个字就把字计数器减 1</li>
<li>数据缓冲寄存器或数据缓冲区：暂存每次传送的数据</li>
<li>设备地址寄存器：存放 I/O 信息的地址，如磁盘的柱面号、磁头号、扇区号</li>
<li>中断机制和控制逻辑：用于向 CPU 提出 I/O 中断请求及保存 CPU 发来的 I/O 命令，管理 DMA 的传送过程<ul>
<li>DMA 与内存之间采用字传送，DMA 与设备之间可能是字位或字节传送，所以 DMA 中要设置数据移位寄存器、字节计数器等硬件逻辑</li>
</ul>
</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208141537601.png" alt="4.1.2.5" style="zoom:22%;">

<p>DMA 方式的处理流程：</p>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208141741995.png" alt="4.1.2.5.1" style="zoom:23%;">

<ul>
<li>处理器向 DMA 模块发出 I/O 命令</li>
<li>处理器继续执行其它工作，DMA 模块负责传送全部数据</li>
<li>数据传送结束后，DMA 中断处理器</li>
</ul>
<p>DMA 方式的特点：</p>
<ul>
<li>CPU 不会终止原程序的执行</li>
<li>CPU 只在数据传送的开始和结束时参与<ul>
<li>开始时，CPU 需要对 DMA 模块进行初始化</li>
<li>结束时，CPU 响应中断，但不必保存现场</li>
</ul>
</li>
</ul>
<p>DMA 方式中的周期窃取</p>
<ul>
<li><p>当 DMA 和 CPU 同时经总线访问内存时，CPU 总是将总线的占有权让给 DMA 一个或几个主存周期，一般是一个存取周期，让设备和内存之间交换数据</p>
</li>
<li><p>周期窃取对延迟 CPU 与主存的数据交换影响不大</p>
<ul>
<li><p>数据传送过程是不连续的和不规则的</p>
</li>
<li><p>CPU 大部分情况下与 Cache 进行数据交换，直接访问内存较少</p>
</li>
</ul>
</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208141742695.png" alt="4.1.2.5.2" style="zoom:30%;">

<p>轮询方式、中断方式和 DMA 方式的比较</p>
<table>
<thead>
<tr>
<th>CPU 作用</th>
<th>等待设备</th>
<th>数据传送</th>
</tr>
</thead>
<tbody><tr>
<td>轮询方式</td>
<td>需要</td>
<td>参与</td>
</tr>
<tr>
<td>中断方式</td>
<td>不需要</td>
<td>参与</td>
</tr>
<tr>
<td>DMA 方式</td>
<td>不需要</td>
<td>不参与</td>
</tr>
</tbody></table>
<h4 id="6-通道方式"><a href="#6-通道方式" class="headerlink" title="6. 通道方式"></a>6. 通道方式</h4><p>I/O 通道又称为通道控制器、I/O 处理器，用于完成逻辑上独立的 I/O 任务，适用于中大型计算机系统</p>
<p>设备控制器包含自身专用的处理器和通道程序，自成体系，使得 CPU 与通道高度并行，实现通道和 CPU 并行操作，通道之间并行操作，设备之间并行操作</p>
<ul>
<li><p>处理器可以不再执行琐碎的 I/O 命令，而改为在主存中组织通道程序，由通道来执行逻辑的 I/O 任务</p>
</li>
<li><p>采用主存，通道，控制器，设备的四级连接，实施三级控制，可控制多台同类或不同类的设备</p>
<ul>
<li><p>一个 CPU 通常连接多个通道，通过 I/O 指令控制</p>
</li>
<li><p>一个通道可以连接若干控制器，通过执行通道命令控制</p>
</li>
<li><p>一个控制器可以连接若干设备，通过动作序列控制</p>
</li>
</ul>
</li>
</ul>
<p>DMA 和 I/O 通道的不同点：DMA 中，每一个 I/O 指令只能读写一个数据块；而通道可以一次面向不同的多个数据块</p>
<p>I/O 通道的工作流程：</p>
<ul>
<li>CPU 在执行主程序时遇到 I/O 任务，启动指定通道（通过通道程序地址字 CAW）上选址的设备</li>
<li>启动成功，通道开始控制设备进行操作，此时 CPU 继续执行其他任务，直到 I/O 操作完成</li>
<li>通道发出 I/O 操作结束中断，处理器相应并停止当前工作，转向处理 I/O 操作结束事件</li>
</ul>
<h3 id="4-1-3-总线与I-x2F-O"><a href="#4-1-3-总线与I-x2F-O" class="headerlink" title="4.1.3 总线与I/O"></a>4.1.3 总线与I/O</h3><h4 id="1-单总线"><a href="#1-单总线" class="headerlink" title="1. 单总线"></a>1. 单总线</h4><p>将 CPU、主存和 I/O 模块连接到同一组总线上</p>
<ul>
<li>优点：结构简单，易于扩充</li>
<li>缺点：主存需要和 I/O 模块共用总线；设备增多会造成总线变长，进而增加传输时延；无法适用于大量高速设备</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208160941800.png" alt="4.1.3.1" style="zoom:25%;">

<h4 id="2-传统的三级总线"><a href="#2-传统的三级总线" class="headerlink" title="2. 传统的三级总线"></a>2. 传统的三级总线</h4><p>主存和 Cache 通过主存总线传送数据，主存总线和扩展总线上的 I/O 设备之间传送数据通过扩展总线接口缓冲</p>
<ul>
<li>优点：主存与 I/O 之间的数据传送与处理器的活动分离；可以支持更多的 I/O 设备</li>
<li>缺点：不适用于 I/O 设备数据速率相差太大的情形</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208160941226.png" alt="4.1.3.2" style="zoom:25%;">

<h4 id="3-采用南北桥的多级总线"><a href="#3-采用南北桥的多级总线" class="headerlink" title="3. 采用南北桥的多级总线"></a>3. 采用南北桥的多级总线</h4><p>通过存储总线、PCI 总线、E(ISA) 总线分别连接主存、高速 I/O 设备和低速 I/O 设备，可以支持不同数据速率的 I/O 设备</p>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208160941704.png" alt="4.1.3.3" style="zoom:28%;">

<h4 id="4-采用I-x2F-O通道的多级总线"><a href="#4-采用I-x2F-O通道的多级总线" class="headerlink" title="4. 采用I/O通道的多级总线"></a>4. 采用<strong>I/O</strong>通道的多级总线</h4><p>支持 CPU、主存和多个 I/O 通道之间的数据传送；支持 I/O 通道和 I/O 控制器，以及 I/O 控制器和设备之间的数据传送</p>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208160941357.png" alt="4.1.3.4" style="zoom:28%;">

<h2 id="4-2-设备管理软件"><a href="#4-2-设备管理软件" class="headerlink" title="4.2 设备管理软件"></a>4.2 设备管理软件</h2><h3 id="4-2-1-I-x2F-O软件的实现层次"><a href="#4-2-1-I-x2F-O软件的实现层次" class="headerlink" title="4.2.1 I/O软件的实现层次"></a>4.2.1 I/O软件的实现层次</h3><h4 id="1-I-x2F-O软件设计目标和原则"><a href="#1-I-x2F-O软件设计目标和原则" class="headerlink" title="1. I/O软件设计目标和原则"></a>1. I/O软件设计目标和原则</h4><p>I/O 软件的总体设计目标是高效率和通用性</p>
<ul>
<li>高效率：改善设备效率，尤其是磁盘 I/O 操作的效率，有很大的影响</li>
<li>通用性：用统一的标准来管理所有设备</li>
</ul>
<p>I/O 软件设计思路：把软件组织成层次结构，低层软件用来屏蔽硬件细节，高层软件向用户提供简洁、友善的界面</p>
<p>I/O 软件主要考虑的问题：</p>
<ul>
<li><p>设备无关性：编写访问文件的程序与物理设备无关</p>
</li>
<li><p>出错处理：低层软件能处理的错误不让高层软件感知</p>
</li>
<li><p>同步/异步传输：支持阻塞和中断驱动两种工作方式</p>
<ul>
<li><p>同步：如果要同步就需要做等待，增加延迟</p>
</li>
<li><p>异步：可以不等待，提供并行度（不等是有前提的，运行进程的后续操作不可以依赖 I/O 操作的结果）</p>
</li>
</ul>
</li>
<li><p>缓冲技术：建立数据缓冲区，匹配数据的到达率与离去率，提高吞吐率</p>
</li>
</ul>
<h4 id="2-I-x2F-O软件的层次结构"><a href="#2-I-x2F-O软件的层次结构" class="headerlink" title="2. I/O软件的层次结构"></a>2. I/O软件的层次结构</h4><img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208161352810.png" alt="4.2.1.2" style="zoom:25%;">

<h3 id="4-2-2-I-x2F-O软件的实现"><a href="#4-2-2-I-x2F-O软件的实现" class="headerlink" title="4.2.2 I/O软件的实现"></a>4.2.2 I/O软件的实现</h3><h4 id="1-I-x2F-O中断处理程序"><a href="#1-I-x2F-O中断处理程序" class="headerlink" title="1. I/O中断处理程序"></a>1. I/O中断处理程序</h4><ul>
<li><p>I/O 中断处理程序位于操作系统底层，与硬件设备密切相关，与系统其余部分尽可能少地发生联系</p>
</li>
<li><p>进程请求 I/O 操作时，通常被挂起，直到数据传输结束后并产生 I/O 中断时，操作系统接管 CPU 后转向中断处理程序</p>
</li>
<li><p>当设备向 CPU 提出中断请求时，CPU 响应请求并转入中断处理程序</p>
</li>
<li><p>I/O 中断处理程序的功能</p>
<ul>
<li><p>检查设备状态寄存器内容，判断产生中断的原因，根据 I/O 操作的完成情况进行相应的处理</p>
</li>
<li><p>如果数据传输有错，向上层软件报告设备的出错信息，实施重新执行</p>
</li>
<li><p>如果正常结束，唤醒等待传输的进程，使其转换为就绪态</p>
</li>
<li><p>如果有等待传输的 I/O 命令，通知相关软件启动下一个 I/O 请求</p>
</li>
</ul>
</li>
</ul>
<h4 id="2-I-x2F-O设备驱动程序"><a href="#2-I-x2F-O设备驱动程序" class="headerlink" title="2. I/O设备驱动程序"></a>2. I/O设备驱动程序</h4><p>I/O 设备驱动程序包括与设备密切相关的所有代码</p>
<ul>
<li>从独立于设备的软件中接收并执行 I/O 请求<ul>
<li>把用户提交的逻辑 I/O 请求转化为物理 I/O 操作的启动和执行</li>
<li>监督设备是否正确执行，管理数据缓冲区，进行必要的纠错处理</li>
</ul>
</li>
</ul>
<p>I/O 设备驱动程序的功能</p>
<ul>
<li>设备初始化<ul>
<li>在系统初次启动或设备传输数据时，预置设备和控制器以及通道状态</li>
</ul>
</li>
<li>执行设备驱动例程<ul>
<li>负责启动设备，进行数据传输</li>
<li>对于具有通道方式，还负责生成通道指令和通道程序，启动通道工作</li>
</ul>
</li>
<li>调用和执行中断处理程序<ul>
<li>负责处理设备和控制器及通道所发出的各种中断</li>
</ul>
</li>
</ul>
<p>I/O 设备驱动程序的层次</p>
<ul>
<li>每个设备驱动程序只处理一种设备，或者一类紧密相关的设备</li>
<li>设备驱动程序分为整体驱动程序和分层驱动程序<ul>
<li>整体驱动程序直接向操作系统提供接口和控制硬件<ul>
<li>适用于功能简单的驱动程序，效率较高，但较难迁移</li>
</ul>
</li>
<li>分层驱动程序将驱动程序分成多层，放在栈中，系统接到 I/O 请求时先调用栈顶的驱动程序，栈顶的驱动程序可以直接处理请求或向下调用更低层的驱动程序，直至请求被处理<ul>
<li>适用于功能复杂、重用性要求较高的驱动程序，结构清晰且便于移植，但会增加一部分系统开销</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="3-独立于设备的I-x2F-O软件"><a href="#3-独立于设备的I-x2F-O软件" class="headerlink" title="3. 独立于设备的I/O软件"></a>3. 独立于设备的I/O软件</h4><p>执行适用于所有设备的常用 I/O 功能，并向用户层软件提供一致性接口</p>
<ul>
<li>设备命名：通过路径名寻址设备</li>
<li>设备保护：检查用户是否有权访问所申请设备</li>
<li>提供与设备无关的数据单位：向高层软件提供统一的数据尺寸</li>
<li>提供缓冲技术：通过缓冲消除填满速率和清空速率的影响</li>
<li>设备分配和状态跟踪：分配不同类型的设备</li>
<li>错误处理和报告：驱动程序无法处理的错误</li>
</ul>
<h4 id="4-用户空间的I-x2F-O软件"><a href="#4-用户空间的I-x2F-O软件" class="headerlink" title="4. 用户空间的I/O软件"></a>4. 用户空间的<strong>I/O</strong>软件</h4><p>库函数：一类常用的用户空间的 I/O 软件</p>
<ul>
<li>一小部分 I/O 软件不在操作系统中，是与应用程序链接在一起的库函数，甚至完全由运行于用户态的程序组成</li>
<li>系统调用通常由库函数封装后供用户使用，封装函数只是将系统调用所用的参数放在合适位置，然后执行访管指令来陷入内核，再由内核函数实现真正的 I/O 操作</li>
</ul>
<p>SPOOLing 软件：在用户空间运行的典型的系统 I/O 软件</p>
<ul>
<li>在内核外运行的系统 I/O 软件，采用预输入、缓输出和井管理技术，通过创建守护进程和特殊目录解决独占型设备的空占问题</li>
</ul>
<h3 id="4-2-3-I-x2F-O操作的执行步骤"><a href="#4-2-3-I-x2F-O操作的执行步骤" class="headerlink" title="4.2.3 I/O操作的执行步骤"></a>4.2.3 I/O操作的执行步骤</h3><blockquote>
<p>以读操作为例</p>
</blockquote>
<ul>
<li><p>应用进程对已打开文件的文件描述符执行读<strong>系统调用</strong>（库函数）</p>
</li>
<li><p>独立于设备的 I/O 软件<strong>检查参数</strong>是否正确，若正确，检查<strong>高速缓存</strong>中有无要读取的信息块</p>
<ul>
<li><p>若有，从缓冲区直接读至用户区，<strong>完成I/O请求</strong></p>
</li>
<li><p>若数据不在缓冲区，执行物理 I/O 操作，独立于设备的 I/O 软件将设备的逻辑名转换成物理名，检查对设备操作的许可权，将 I/O 请求排队，阻塞应用进程且等待 I/O 操作完成</p>
</li>
</ul>
</li>
<li><p>内核启动设备驱动程序，分配存放读出块的缓冲区，准备接收数据并向设备控制寄存器发送启动命令，或建立 DMA 传输，启动 I/O</p>
</li>
<li><p>设备控制器操作设备，执行数据传输。</p>
</li>
<li><p>当采用 DMA 控制器控制数据传输时，一旦传输完成，硬件产生 I/O 结束中断</p>
</li>
<li><p>CPU 响应中断，转向磁盘中断处理程序，检查中断产生原因和设备的执行状态</p>
<ul>
<li>若设备有错，向设备驱动程序发信号，检查是否能重复执行，如果允许，重发启动设备命令，再次传输；否则，向上层软件报告错误</li>
<li>若设备 I/O 正确完成，将数据传输到指定的用户进程空间，唤醒阻塞进程并将其放人就绪队列。然后，系统检查有无 I/O 请求在排队，若有，再启动设备，继续传输</li>
<li>至此，中断处理完成且返回，将成功或失败的信息逐层向上报告</li>
</ul>
</li>
<li><p>当应用进程被再次调度执行时，从 I/O 系统调用的断点处恢复执行</p>
</li>
</ul>
<h3 id="4-2-4-I-x2F-O缓冲区"><a href="#4-2-4-I-x2F-O缓冲区" class="headerlink" title="4.2.4 I/O缓冲区"></a>4.2.4 I/O缓冲区</h3><h4 id="1-I-x2F-O缓冲技术"><a href="#1-I-x2F-O缓冲技术" class="headerlink" title="1. I/O缓冲技术"></a>1. I/O缓冲技术</h4><p>缓冲区：在内存中开辟的存储区，专门用于临时存放 I/O 操作的数据</p>
<p>设置 I/O 缓冲的目的</p>
<ul>
<li>解决 CPU 与设备之间速度不匹配的矛盾，协调逻辑记录大小和物理记录大小不一致的问题</li>
<li>减少 I/O 操作对 CPU 的中断次数</li>
<li>放宽对 CPU 中断响应时间的要求</li>
<li>提高 CPU 和设备的并行性</li>
</ul>
<p>实现缓冲技术的基本思想：</p>
<ul>
<li>写操作：先向系统申请一个输入缓冲区，将数据送至缓冲区，直到装满或需要写存储，待适当时候系统将缓冲区内容写到设备上</li>
<li>读操作：先向系统申请一个输出缓冲区，系统将设备上的物理记录读至缓冲区，根据要求将当前所需要的数据从缓冲区中读出并传送给进程</li>
</ul>
<h4 id="2-单缓冲技术"><a href="#2-单缓冲技术" class="headerlink" title="2. 单缓冲技术"></a>2. 单缓冲技术</h4><p>操作系统在主存的系统区中开设一个缓冲区</p>
<ul>
<li><p>输入：将数据读至缓冲区，系统将缓冲区数据送至用户区，应用程序对数据进行处理，同时系统读入接下来的数据</p>
</li>
<li><p>输出：把数据从用户区复制到缓冲区，系统将数据输出后，应用程序继续请求输出</p>
</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208161400544.png" alt="4.2.4.2" style="zoom:22%;">

<h4 id="3-双缓冲技术"><a href="#3-双缓冲技术" class="headerlink" title="3. 双缓冲技术"></a>3. 双缓冲技术</h4><p>使用两个缓冲区</p>
<ul>
<li>输入：设备先将数据输入缓冲区1，系统从缓冲区1把数据传到用户区，供应用程序处理，同时设备将数据传送到缓冲区2</li>
<li>输出：应用程序将数据从用户传送到缓冲区1，系统将数据传送到设备，同时应用程序将数据传送到缓冲区2</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208161400908.png" alt="4.2.4.3" style="zoom:22%;">

<h4 id="4-循环缓冲技术"><a href="#4-循环缓冲技术" class="headerlink" title="4. 循环缓冲技术"></a>4. 循环缓冲技术</h4><p>操作系统分配一组缓冲区，每个缓冲区度有指向下一个缓冲区的链接指针，构成循环缓冲</p>
<ul>
<li>解决设备和进程速度不匹配的问题</li>
<li>是系统的公共资源，供进程共享并由系统统一分配和管理</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208161400961.png" alt="4.2.4.4" style="zoom:22%;">

<h2 id="4-3-独占型外围设备的分配"><a href="#4-3-独占型外围设备的分配" class="headerlink" title="4.3 独占型外围设备的分配"></a>4.3 独占型外围设备的分配</h2><h3 id="4-3-1-设备独立性"><a href="#4-3-1-设备独立性" class="headerlink" title="4.3.1 设备独立性"></a>4.3.1 设备独立性</h3><p>需要解决的问题：作业执行前对设备提出申请时，指定某台具体的物理设备会让设备分配变得简单，但如果所指定设备出现故障，即便计算机系统中有同类设备也不能运行</p>
<p>设备独立性：用户通常不指定物理设备，而是指定逻辑设备，使得用户作业和物理设备分离开来，再通过其它途径建立逻辑设备和物理设备之间的映射</p>
<ul>
<li>微型计算机的操作系统中不一定支持设备独立性</li>
</ul>
<p>设备管理的功能就是将逻辑设备名转换为物理设备名，为此系统需要提供逻辑设备名和物理设备名的对应表以供转换使用</p>
<ul>
<li>逻辑设备号由用户定义</li>
<li>物理设备号由系统规定，不可修改</li>
</ul>
<p>设备独立性的优点</p>
<ul>
<li>应用程序与具体物理设备无关，系统增减或变更设备时不需要修改源程序</li>
<li>易于应对 I/O 设备故障，提高系统可靠性</li>
<li>增加设备分配的灵活性，更有效地利用设备资源，实现多道程序设计</li>
</ul>
<h3 id="4-3-2-独占型外设的分配"><a href="#4-3-2-独占型外设的分配" class="headerlink" title="4.3.2 独占型外设的分配"></a>4.3.2 独占型外设的分配</h3><h4 id="1-设备分配方式"><a href="#1-设备分配方式" class="headerlink" title="1. 设备分配方式"></a>1. 设备分配方式</h4><p>独占型设备：一次只能由一个进程独占使用</p>
<ul>
<li><p>只能由一个进程独占式使用</p>
</li>
<li><p>可以让多个进程同时使用的设备称为“共享设备”，其管理工作主要是驱动调度和实施驱动，一般不必分配</p>
</li>
</ul>
<p>设备分配方式</p>
<ul>
<li>静态分配：进程运行前申请，实现简单，能够防止系统发生死锁，但会降低设备利用率，独占型设备多选</li>
<li>动态分配：进程随用随申请，提高设备利用率，但是对于打印机等独占型设备使用动态分配可以显著提高设备利用率</li>
</ul>
<h4 id="2-独占型设备分配的数据结构"><a href="#2-独占型设备分配的数据结构" class="headerlink" title="2. 独占型设备分配的数据结构"></a>2. 独占型设备分配的数据结构</h4><p>为实现独占型设备分配，操作系统的设备管理需要建立设备类表和设备表</p>
<ul>
<li>设备类表：每类设备对应于设备类表的中的一栏<ul>
<li>包括：设备类、总台数、空闲台数、设备表起始地址等</li>
<li>支持设备独立性时才会使用</li>
</ul>
</li>
<li>设备表：每类设备都有各自的设备表，用来登记这类设备中的每台物理设备<ul>
<li>包括：物理设备名（号）、逻辑设备名（号）、占有设备的进程号、是否分配、好/坏标志等</li>
</ul>
</li>
</ul>
<p>对于采用通道结构的系统，需要对通道、控制器和每台物理设备进行管理和控制，必须设置系统设备表、通道控制表、控制器控制表和设备控制表</p>
<ul>
<li>整个系统建立一张系统设备表，记录系统配置的所有物理设备的情况，每台物理设备占有一栏<ul>
<li>包括设备类型、台数、设备号、设备控制表指针等</li>
</ul>
</li>
<li>对于通道控制表、控制器控制表和设备控制表，每个通道、控制器、设备各设置一张<ul>
<li>分别记录各自的地址（标识符）、状态（忙/闲、已分配/未分配）、等待获得此部件的进程队列指针及一次分配后相互链接的指针，以备分配和执行 I/O 操作时使用</li>
</ul>
</li>
</ul>
<h2 id="4-4-共享型外围设备的驱动"><a href="#4-4-共享型外围设备的驱动" class="headerlink" title="4.4 共享型外围设备的驱动"></a>4.4 共享型外围设备的驱动</h2><h3 id="4-4-1-磁盘的物理结构"><a href="#4-4-1-磁盘的物理结构" class="headerlink" title="4.4.1 磁盘的物理结构"></a>4.4.1 磁盘的物理结构</h3><h4 id="1-磁盘物理结构"><a href="#1-磁盘物理结构" class="headerlink" title="1. 磁盘物理结构"></a>1. 磁盘物理结构</h4><p>磁盘是一种直接存取存储设备，又称为随机存取存储设备，每条物理记录都有明确的位置和唯一的地址，按照三维坐标进行随机存储</p>
<ul>
<li><p>磁盘由多个盘片组成，每个盘片被划分为多个同心圆结构的磁道，每个盘片的两面都可以存取数据</p>
</li>
<li><p>不同盘片上位于相同位置的磁道构成的圆柱体称为柱面</p>
</li>
<li><p>每个磁道分为固定多个或不等个数的扇区：为了对大量扇区寻址，操作系统将相邻的扇区组合成簇存储文件</p>
</li>
<li><p>物理块（扇面）在磁盘上的三维地址（磁头号，柱面号，扇区号）</p>
<ul>
<li>盘面号也被叫做磁头号</li>
<li>磁道号也被叫做柱面号</li>
<li>面和道都是从 0 开始编址的，但扇区没有 0 扇区的概念，一定是从 1 开始编号的</li>
</ul>
</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208150956104.png" alt="4.4.1.1" style="zoom:28%;">

<h4 id="2-磁盘读写时间"><a href="#2-磁盘读写时间" class="headerlink" title="2. 磁盘读写时间"></a>2. 磁盘读写时间</h4><p>读写数据时，磁头必须定位到指定的磁道上的指定扇区的开始处</p>
<ul>
<li>寻道：控制移动臂到达指定柱面，选择磁头号</li>
<li>旋转：等待要读写的扇区旋转到磁头下</li>
<li>数据传送</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151003347.png" alt="4.4.1.2" style="zoom:25%;">

<p>磁盘存取时间 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.355ex;" xmlns="http://www.w3.org/2000/svg" width="2.355ex" height="1.887ex" role="img" focusable="false" viewBox="0 -677 1041.1 834.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g></g></g></g></svg></mjx-container> 是磁盘完成数据读写所需要的时间，是寻道时间、旋转延迟、传送时间的总和<br><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -1.577ex;" xmlns="http://www.w3.org/2000/svg" width="20.335ex" height="4.676ex" role="img" focusable="false" viewBox="0 -1370 8988.1 2067"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g></g><g data-mml-node="mo" transform="translate(1318.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msub" transform="translate(2374.6,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g></g><g data-mml-node="mo" transform="translate(3595.5,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mfrac" transform="translate(4595.7,0)"><g data-mml-node="mn" transform="translate(445.5,676)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mrow" transform="translate(220,-686)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(500,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g><rect width="1151" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(6208.9,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mfrac" transform="translate(7209.1,0)"><g data-mml-node="mi" transform="translate(675,676)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mrow" transform="translate(220,-686)"><g data-mml-node="mi"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(451,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g></g><rect width="1539" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container></p>
<ul>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.355ex;" xmlns="http://www.w3.org/2000/svg" width="2.259ex" height="1.887ex" role="img" focusable="false" viewBox="0 -677 998.6 834.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g></g></g></g></svg></mjx-container> 表示寻道时间</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.02ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 451 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container> 表示磁盘旋转的角速度，<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.174ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2729 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(500,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mo" transform="translate(1000,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(1389,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g><g data-mml-node="mi" transform="translate(1889,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(2340,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container> 表示平均旋转等待时间</li>
<li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container> 表示读写的数据字节数，<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="2.009ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 888 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g></g></g></svg></mjx-container> 表示每个磁道道字节数，<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.891ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3046 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(429,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mo" transform="translate(929,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1318,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(1769,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(2657,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container> 表示平均传输时间</li>
</ul>
<h3 id="4-4-2-磁盘的驱动调度"><a href="#4-4-2-磁盘的驱动调度" class="headerlink" title="4.4.2 磁盘的驱动调度"></a>4.4.2 磁盘的驱动调度</h3><p>磁盘可能同时接收到若干 I/O请求，如果随机选择并响应 I/O 请求，可能得到最坏的性能</p>
<p>驱动调度是指系统采用一种调度策略，尽可能按最佳次序执行要求访问磁盘的多个 I/O 请求</p>
<ul>
<li>能减少为若干 I/O 请求服务所需要消耗的总时间</li>
<li>驱动调度策略包括移臂调度和旋转调度</li>
</ul>
<h3 id="4-4-3-旋转调度"><a href="#4-4-3-旋转调度" class="headerlink" title="4.4.3 旋转调度"></a>4.4.3 旋转调度</h3><p>目的：使得旋转延迟的总时间最少</p>
<h4 id="1-循环排序"><a href="#1-循环排序" class="headerlink" title="1. 循环排序"></a>1. 循环排序</h4><p>通过优化 I/O 请求排序，在最少旋转圈数内完成位于同一柱面的访问请求</p>
<p>旋转位置测定硬件和多磁头同时读写技术有利于提高旋转调度的效率</p>
<h4 id="2-优化分布"><a href="#2-优化分布" class="headerlink" title="2. 优化分布"></a>2. 优化分布</h4><p>通过信息在存储空间的排列方式来减少旋转延迟</p>
<p>如果沿着磁道按序对扇区编号，可能由于磁盘转速太快，造成处理当前扇区的数据时，下一个扇区已经跳过，需要再转一圈才能继续读数据</p>
<ul>
<li>因此，对扇区编号时会间隔编号，例如交叉因子为 2:1 表示相邻编号之间会间隔 1 个扇区，3:1 表示会间隔 2 个扇区</li>
</ul>
<p>按柱面而非盘面进行数据读写</p>
<ul>
<li>连续记录数据时，先记录在同一柱面的不同磁道上， 然后再更换柱面，可以减少数据读写时的移臂操作</li>
</ul>
<blockquote>
<p>例：考虑 10 条逻辑记录 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="10.893ex" height="2.059ex" role="img" focusable="false" viewBox="0 -716 4814.7 910"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mo" transform="translate(750,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(1194.7,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(1953.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mo" transform="translate(2398.3,0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path></g><g data-mml-node="mo" transform="translate(3737,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(4181.7,0)"><path data-c="1D43D" d="M447 625Q447 637 354 637H329Q323 642 323 645T325 664Q329 677 335 683H352Q393 681 498 681Q541 681 568 681T605 682T619 682Q633 682 633 672Q633 670 630 658Q626 642 623 640T604 637Q552 637 545 623Q541 610 483 376Q420 128 419 127Q397 64 333 21T195 -22Q137 -22 97 8T57 88Q57 130 80 152T132 174Q177 174 182 130Q182 98 164 80T123 56Q115 54 115 53T122 44Q148 15 197 15Q235 15 271 47T324 130Q328 142 387 380T447 625Z"></path></g></g></g></svg></mjx-container> 被存放于某旋转型设备上，假设每道存放 10 个物理块，旋转速度为一周 20 ms，处理程序读出每块后需要花费 4 ms 进行处理</p>
</blockquote>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151715007.png" alt="4.4.3.2" style="zoom:33%;">

<p>对于优化前而言，读出并处理记录 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.697ex" height="1.62ex" role="img" focusable="false" viewBox="0 -716 750 716"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g></g></g></svg></mjx-container> 之后将旋转到记录 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.873ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 828 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></g></g></g></svg></mjx-container> 的开始处，为了读出记录 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.717ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 759 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g></g></g></svg></mjx-container>，必须再转一周；对于优化后而言，当读出记录 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.697ex" height="1.62ex" role="img" focusable="false" viewBox="0 -716 750 716"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g></g></g></svg></mjx-container> 并处理结束后，恰巧旋转至记录 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.717ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 759 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g></g></g></svg></mjx-container> 的位置，就可以立即读出记录 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.717ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 759 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g></g></g></svg></mjx-container> 并处理</p>
<h3 id="4-4-4-移臂调度"><a href="#4-4-4-移臂调度" class="headerlink" title="4.4.4 移臂调度"></a>4.4.4 移臂调度</h3><h4 id="1-先来先服务FCFS"><a href="#1-先来先服务FCFS" class="headerlink" title="1.  先来先服务FCFS"></a>1.  先来先服务FCFS</h4><ul>
<li><p>移臂距离大，性能不好，移动臂是随机移动，寻道性能较差</p>
</li>
<li><p>按顺序处理请求，对所有进程公平</p>
</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151518588.png" alt="FCFS disk" style="zoom: 28%;">

<h4 id="2-最短查找时间优先SSTF"><a href="#2-最短查找时间优先SSTF" class="headerlink" title="2. 最短查找时间优先SSTF"></a>2. 最短查找时间优先SSTF</h4><ul>
<li>先执行查找时间最短的请求，具有较好的寻道性能</li>
<li>存在“饥饿”现象：距离比较远的很难被满足</li>
<li>总是选择最小寻道时间并不能保证平均寻道时间最小，但是它的性能比 FCFS 更好</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151523006.png" alt="SSTF" style="zoom:28%;">

<h4 id="3-扫描算法SCAN"><a href="#3-扫描算法SCAN" class="headerlink" title="3. 扫描算法SCAN"></a>3. 扫描算法SCAN</h4><ul>
<li><p>移动臂每次向一个方向移动，遇到最近的 I/O 请求便进行处理，到达最后一个柱面后再向相反方向移动</p>
</li>
<li><p>对最近扫描所跨越区域的请求响应较慢</p>
</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151637159.png" alt="SCAN" style="zoom:28%;">

<h4 id="4-LOOK算法"><a href="#4-LOOK算法" class="headerlink" title="4. LOOK算法"></a>4. LOOK算法</h4><p><img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151437947.svg" alt="LOOK"></p>
<ul>
<li>无请求时移动臂停止不动，有请求时按电梯规律移动</li>
<li>每次选择沿移动臂的移动方向最近的柱面</li>
<li>如果当前移动方向上没有但相反方向有请求时，改变移动方向</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151635985.png" alt="LOOK" style="zoom:28%;">

<h4 id="5-循环扫描C-SCAN"><a href="#5-循环扫描C-SCAN" class="headerlink" title="5. 循环扫描C-SCAN"></a>5. 循环扫描C-SCAN</h4><ul>
<li><p>把扫描限定在一个方向</p>
</li>
<li><p>当访问到沿某个方向的最后一个磁道时，磁头臂返回到磁盘相反方向磁道的末端，并再次开始扫描</p>
</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151634356.png" alt="C-SCAN" style="zoom:28%;">



<h4 id="6-C-LOOK算法"><a href="#6-C-LOOK算法" class="headerlink" title="6. C-LOOK算法"></a>6. C-LOOK算法</h4><ul>
<li><p>磁头从初始请求开始到另一个方向的最后一个请求，并为中间的所有请求提供服务</p>
</li>
<li><p>磁头在一端完成最后一个请求后向另一个方向跳跃，并继续向剩余的请求前进，以与先前相同的方向完成它们</p>
</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151639733.png" alt="C-LOOK" style="zoom:28%;">

<h3 id="4-4-5-提高磁盘I-x2F-O速度的办法"><a href="#4-4-5-提高磁盘I-x2F-O速度的办法" class="headerlink" title="4.4.5 提高磁盘I/O速度的办法"></a>4.4.5 提高磁盘I/O速度的办法</h3><p>提前读：按照顺序访问时，可以读当前磁盘块时，提前把下一个磁盘块的数据也读入磁盘缓冲区</p>
<p>延迟写：由于缓冲区的数据不久以后还会再次被进程访问，因此不立即将缓冲区中的数据写回盘，而是挂载空闲缓冲区队列队尾，直到移动到空闲缓冲区队首时在写回</p>
<p>虚拟盘：用内存空间仿真磁盘，又叫 RAM 盘，相应的操作在内存中执行而不是硬盘中，比如浏览器缓存等</p>
<h3 id="4-4-6-磁盘循环冗余阵列"><a href="#4-4-6-磁盘循环冗余阵列" class="headerlink" title="4.4.6 磁盘循环冗余阵列"></a>4.4.6 磁盘循环冗余阵列</h3><h4 id="1-RAID-0"><a href="#1-RAID-0" class="headerlink" title="1. RAID 0"></a>1. RAID 0</h4><p>连续的数据条带以轮转方式写到全部磁盘上，然后采用并行交叉存取，减少 I/O 请求排队时间，适用于大数据量的 I/O 请求</p>
<p>并无冗余校验功能，可靠性较差</p>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151644798.png" alt="RAID0" style="zoom: 25%;">

<p>RAID 0 的数据映射</p>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151644308.png" alt="RAID0-1" style="zoom:27%;">

<h4 id="2-RAID-1"><a href="#2-RAID-1" class="headerlink" title="2. RAID 1"></a>2. RAID 1</h4><p>采用镜像盘双份所有数据来提高容错性，读请求拥有最小寻道时间，写请求可并行完成</p>
<p>缺点是容量下降一半，故成本很高</p>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151645169.png" alt="RAID1" style="zoom:37%;">



<h4 id="3-RAID-2"><a href="#3-RAID-2" class="headerlink" title="3. RAID 2"></a>3. RAID 2</h4><p>采用数据字或字节交叉存放，并行存取获得高性能，使用海明校验码，适合大量顺序数据访问</p>
<p>由于使用多个冗余盘，成本较高。</p>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151645173.png" alt="RAID2" style="zoom:37%;">

<h4 id="4-RAID-3"><a href="#4-RAID-3" class="headerlink" title="4. RAID 3"></a>4. RAID 3</h4><p>RAID 3 是 RAID 2 的简化版本，差别是它仅用一只冗余盘，采用奇偶校验技术</p>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151646173.png" alt="RAID3" style="zoom:37%;">

<h4 id="5-RAID-4"><a href="#5-RAID-4" class="headerlink" title="5. RAID 4"></a>5. RAID 4</h4><p>采用独立存取磁盘阵列，数据条带交叉存放，访问请求可并行地获得满足，适合有较高 I/O 请求速度的应用场合。使用一只冗余盘存放奇偶校验码</p>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151646784.png" alt="RAID4" style="zoom:37%;">

<h4 id="6-RAID-5"><a href="#6-RAID-5" class="headerlink" title="6. RAID 5"></a>6. RAID 5</h4><p>RAID 5 与 RAID4 的组织类似，但奇偶校验码循环分布在每个盘上，使得容错性更好</p>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151646028.png" alt="RAID5" style="zoom:37%;">

<h4 id="7-RAID-6"><a href="#7-RAID-6" class="headerlink" title="7. RAID 6"></a>7. RAID 6</h4><p>采用双重冗余技术， <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.699ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 751 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g></g></g></svg></mjx-container> 和 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="1.79ex" height="2.032ex" role="img" focusable="false" viewBox="0 -704 791 898"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D444" d="M399 -80Q399 -47 400 -30T402 -11V-7L387 -11Q341 -22 303 -22Q208 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435Q740 255 592 107Q529 47 461 16L444 8V3Q444 2 449 -24T470 -66T516 -82Q551 -82 583 -60T625 -3Q631 11 638 11Q647 11 649 2Q649 -6 639 -34T611 -100T557 -165T481 -194Q399 -194 399 -87V-80ZM636 468Q636 523 621 564T580 625T530 655T477 665Q429 665 379 640Q277 591 215 464T153 216Q153 110 207 59Q231 38 236 38V46Q236 86 269 120T347 155Q372 155 390 144T417 114T429 82T435 55L448 64Q512 108 557 185T619 334T636 468ZM314 18Q362 18 404 39L403 49Q399 104 366 115Q354 117 347 117Q344 117 341 117T337 118Q317 118 296 98T274 52Q274 18 314 18Z"></path></g></g></g></svg></mjx-container> 是两种不同的数据校验算法</p>
<ul>
<li><p>其中一种是 RAID 4 和 RAID 5 所使用的异或计算</p>
</li>
<li><p>另一种是独立数据校验算法</p>
</li>
</ul>
<p>即使有两个数据磁盘发生错误，也可重新生成数据</p>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208151646166.png" alt="RAID6" style="zoom:37%;">

<h4 id="8-RAID级别总结"><a href="#8-RAID级别总结" class="headerlink" title="8. RAID级别总结"></a>8. RAID级别总结</h4><img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208152148312.png" alt="4.4.6.8" style="zoom:33%;">

<h3 id="4-4-7-磁盘Cache"><a href="#4-4-7-磁盘Cache" class="headerlink" title="4.4.7 磁盘Cache"></a>4.4.7 磁盘Cache</h3><p>磁盘高速缓存是主存中为磁盘扇区设置的一个缓冲区，包含磁盘中某些扇区的副本</p>
<p>利用局部性原理，可以减少平均存储器存取时间</p>
<p>替换策略：</p>
<ul>
<li>最近最少使用 LRU, Least Recently Used<ul>
<li>替换在高速缓存中未被访问的时间最长的块</li>
<li>逻辑上高速缓存由一个关于块的栈组成，最近访问过的块在栈顶。当高速缓存中的一个块被访问到时，它从栈中当前的位置移到栈顶</li>
<li>当一个块从辅存中取入时，把位于栈顶的那一块移出，并把新到来的块压入栈顶</li>
<li>并不需要在主存中真正移动这些块，有一个栈指针与高速缓存相关联</li>
</ul>
</li>
<li>最不经常使用 LFU, Least Frequently Used<ul>
<li>替换集合中被访问次数最少的块</li>
<li>LFU 可以通过给每个块关联一个计数器来实现</li>
<li>当一个块被读入时，它的计数器被指定为 1；当每次访问到这一块时，它的计数器增 1</li>
<li>当需要替换时，选择计数器值最小的块</li>
<li>直觉上 LFU 比 LRU 更适合，因为 LFU 使用了关于每个块的更多的相关信息</li>
</ul>
</li>
</ul>
<h2 id="4-5-虚拟设备"><a href="#4-5-虚拟设备" class="headerlink" title="4.5 虚拟设备"></a>4.5 虚拟设备</h2><p>虚拟设备是用一类物理设备模拟另一类物理设备的技术，可以让独享型设备变为共享设备</p>
<ul>
<li>内存卡模拟磁盘</li>
<li>块设备模拟字符设备</li>
<li>输入输出重定向</li>
</ul>
<h3 id="4-5-1-SPOOLing系统的设计与实现"><a href="#4-5-1-SPOOLing系统的设计与实现" class="headerlink" title="4.5.1. SPOOLing系统的设计与实现"></a>4.5.1. SPOOLing系统的设计与实现</h3><p>SPOOLing 软件是在内核外运行的系统 I/O 软件，采用预输入、缓输出和井管理技术，是多道程序设计系统中处理独占型设备的一种方法</p>
<ul>
<li>通过创建守护进程和特殊目录解决独占型设备的空占问题</li>
<li>不仅设备利用率提高，作业的运行时间也会缩短，每个作业都感觉各自拥有所需的独占设备</li>
</ul>
<p>为存放输入数据和输出数据，SPOOLing 系统在磁盘上开辟输入井和输出井</p>
<ul>
<li>“井”是用作缓冲的存储区域，采用井的技术能调节供求之间的矛盾，消除人工干预带来的损失</li>
</ul>
<p>SPOOLing 系统的组成</p>
<ul>
<li>预输入程序：将数据从输入设备传送到磁盘输入井<ul>
<li>操作系统将一批作业从输入设备上预先输入到磁盘的输入缓冲区中暂时保存，这称为“预输入”</li>
<li>调度作业执行时，作业使用数据不必再启动输入设备，从磁盘的输入缓冲区读入即可</li>
</ul>
</li>
<li>缓输出程序：将数据从磁盘输出井传送到输出设备<ul>
<li>作业执行中不必直接启动输出设备，只要将作业的输出数据暂时保存到磁盘的输出缓冲区</li>
<li>当作业执行完毕后，由操作系统组织信息成批输出</li>
</ul>
</li>
<li>井管理程序：控制作业和井之间的数据交换<ul>
<li>放置在井中的文件被称为井文件，井文件空间管理简单，它被划分为等长的的物理块，每块用来存放一条或多条逻辑记录</li>
</ul>
</li>
</ul>
<img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208161401116.png" alt="4.5.1" style="zoom:22%;">

<h3 id="4-5-2-输入井的作业状态"><a href="#4-5-2-输入井的作业状态" class="headerlink" title="4.5.2 输入井的作业状态"></a>4.5.2 输入井的作业状态</h3><ul>
<li>输入状态：正在预输入</li>
<li>收容状态：预输入完成，等待执行</li>
<li>执行状态：作业选中执行，正在从输入井读取输入，向输出井写入数据</li>
<li>完成状态：作业已经撤离，输出结果等待缓输出</li>
<li>通过预处理，结合井管理，可以实现为脱机状态，从联机（online）到脱机（offline），成功耦合</li>
</ul>
<table>
<thead>
<tr>
<th><img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208161401174.png" alt="4.5.2.1" style="zoom:22%;"></th>
<th><img src="https://typora-vohsiliu.oss-cn-hangzhou.aliyuncs.com/202208161401179.png" alt="4.5.2.2" style="zoom:22%;"></th>
</tr>
</thead>
</table>
<h3 id="4-5-3-打印机SPOOLing"><a href="#4-5-3-打印机SPOOLing" class="headerlink" title="4.5.3. 打印机SPOOLing"></a>4.5.3. 打印机SPOOLing</h3><p>打印机 SPOOLing 守护进程是一个典型的 SPOOLing 应用</p>
<ul>
<li>解决的问题：打印机空占问题<ul>
<li>如果用户进程通过打开打印机的设备文件来申请和使用打印机，往往会造成该进程打开设备文件后长达数小时不用，但其他进程又无法使用打印机</li>
</ul>
</li>
<li>打印机守护进程和 SPOOLing 打印目录<ul>
<li>守护进程是唯一有特权使用打印机设备的进程</li>
<li>打印文件前，用户进程先产生完整的待输出文件，并存放在打印目录下</li>
<li>打印机空闲时，启动守护进程，打印待输出文件</li>
</ul>
</li>
</ul>

        </div>

        

        

        
            <div class="article-nav">
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2022/08/13/%E7%AC%AC%E4%B8%89%E7%AB%A0-%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">第三章 存储管理</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">拔丝地瓜</a>
        </div>
        
            <script async  src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv">
                        Visitor Count&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                    </span>
                
                
                    <span id="busuanzi_container_site_pv">
                        Totalview&nbsp;<span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86"><span class="nav-text">第四章 设备管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80"><span class="nav-text">4.1 设备管理基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-1-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0"><span class="nav-text">4.1.1 设备管理概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-I-x2F-O%E8%AE%BE%E5%A4%87"><span class="nav-text">1. I&#x2F;O设备</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-I-x2F-O%E8%AE%BE%E5%A4%87%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-text">2. I&#x2F;O设备的分类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E7%9A%84%E7%9B%AE%E6%A0%87"><span class="nav-text">3. 设备管理的目标</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="nav-text">4. 设备管理的功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E7%9A%84%E5%B1%82%E6%AC%A1"><span class="nav-text">5. 设备管理的层次</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-2-I-x2F-O%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F"><span class="nav-text">4.1.2 I&#x2F;O控制方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E8%AE%BE%E5%A4%87%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-text">1. 设备控制器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-I-x2F-O%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F"><span class="nav-text">2. I&#x2F;O控制方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E8%BD%AE%E8%AF%A2%E6%96%B9%E5%BC%8F"><span class="nav-text">3. 轮询方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E4%B8%AD%E6%96%AD%E6%96%B9%E5%BC%8F"><span class="nav-text">4. 中断方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-DMA%E6%96%B9%E5%BC%8F"><span class="nav-text">5. DMA方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-%E9%80%9A%E9%81%93%E6%96%B9%E5%BC%8F"><span class="nav-text">6. 通道方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-3-%E6%80%BB%E7%BA%BF%E4%B8%8EI-x2F-O"><span class="nav-text">4.1.3 总线与I&#x2F;O</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%8D%95%E6%80%BB%E7%BA%BF"><span class="nav-text">1. 单总线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E4%BC%A0%E7%BB%9F%E7%9A%84%E4%B8%89%E7%BA%A7%E6%80%BB%E7%BA%BF"><span class="nav-text">2. 传统的三级总线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E9%87%87%E7%94%A8%E5%8D%97%E5%8C%97%E6%A1%A5%E7%9A%84%E5%A4%9A%E7%BA%A7%E6%80%BB%E7%BA%BF"><span class="nav-text">3. 采用南北桥的多级总线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E9%87%87%E7%94%A8I-x2F-O%E9%80%9A%E9%81%93%E7%9A%84%E5%A4%9A%E7%BA%A7%E6%80%BB%E7%BA%BF"><span class="nav-text">4. 采用I&#x2F;O通道的多级总线</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6"><span class="nav-text">4.2 设备管理软件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-1-I-x2F-O%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%B1%82%E6%AC%A1"><span class="nav-text">4.2.1 I&#x2F;O软件的实现层次</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-I-x2F-O%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87%E5%92%8C%E5%8E%9F%E5%88%99"><span class="nav-text">1. I&#x2F;O软件设计目标和原则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-I-x2F-O%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="nav-text">2. I&#x2F;O软件的层次结构</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-2-I-x2F-O%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="nav-text">4.2.2 I&#x2F;O软件的实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-I-x2F-O%E4%B8%AD%E6%96%AD%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F"><span class="nav-text">1. I&#x2F;O中断处理程序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-I-x2F-O%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8%E7%A8%8B%E5%BA%8F"><span class="nav-text">2. I&#x2F;O设备驱动程序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E7%8B%AC%E7%AB%8B%E4%BA%8E%E8%AE%BE%E5%A4%87%E7%9A%84I-x2F-O%E8%BD%AF%E4%BB%B6"><span class="nav-text">3. 独立于设备的I&#x2F;O软件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E7%94%A8%E6%88%B7%E7%A9%BA%E9%97%B4%E7%9A%84I-x2F-O%E8%BD%AF%E4%BB%B6"><span class="nav-text">4. 用户空间的I&#x2F;O软件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-3-I-x2F-O%E6%93%8D%E4%BD%9C%E7%9A%84%E6%89%A7%E8%A1%8C%E6%AD%A5%E9%AA%A4"><span class="nav-text">4.2.3 I&#x2F;O操作的执行步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-4-I-x2F-O%E7%BC%93%E5%86%B2%E5%8C%BA"><span class="nav-text">4.2.4 I&#x2F;O缓冲区</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-I-x2F-O%E7%BC%93%E5%86%B2%E6%8A%80%E6%9C%AF"><span class="nav-text">1. I&#x2F;O缓冲技术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%8D%95%E7%BC%93%E5%86%B2%E6%8A%80%E6%9C%AF"><span class="nav-text">2. 单缓冲技术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E5%8F%8C%E7%BC%93%E5%86%B2%E6%8A%80%E6%9C%AF"><span class="nav-text">3. 双缓冲技术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E5%BE%AA%E7%8E%AF%E7%BC%93%E5%86%B2%E6%8A%80%E6%9C%AF"><span class="nav-text">4. 循环缓冲技术</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-%E7%8B%AC%E5%8D%A0%E5%9E%8B%E5%A4%96%E5%9B%B4%E8%AE%BE%E5%A4%87%E7%9A%84%E5%88%86%E9%85%8D"><span class="nav-text">4.3 独占型外围设备的分配</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-1-%E8%AE%BE%E5%A4%87%E7%8B%AC%E7%AB%8B%E6%80%A7"><span class="nav-text">4.3.1 设备独立性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-2-%E7%8B%AC%E5%8D%A0%E5%9E%8B%E5%A4%96%E8%AE%BE%E7%9A%84%E5%88%86%E9%85%8D"><span class="nav-text">4.3.2 独占型外设的分配</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E8%AE%BE%E5%A4%87%E5%88%86%E9%85%8D%E6%96%B9%E5%BC%8F"><span class="nav-text">1. 设备分配方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E7%8B%AC%E5%8D%A0%E5%9E%8B%E8%AE%BE%E5%A4%87%E5%88%86%E9%85%8D%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="nav-text">2. 独占型设备分配的数据结构</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-%E5%85%B1%E4%BA%AB%E5%9E%8B%E5%A4%96%E5%9B%B4%E8%AE%BE%E5%A4%87%E7%9A%84%E9%A9%B1%E5%8A%A8"><span class="nav-text">4.4 共享型外围设备的驱动</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-1-%E7%A3%81%E7%9B%98%E7%9A%84%E7%89%A9%E7%90%86%E7%BB%93%E6%9E%84"><span class="nav-text">4.4.1 磁盘的物理结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E7%A3%81%E7%9B%98%E7%89%A9%E7%90%86%E7%BB%93%E6%9E%84"><span class="nav-text">1. 磁盘物理结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E7%A3%81%E7%9B%98%E8%AF%BB%E5%86%99%E6%97%B6%E9%97%B4"><span class="nav-text">2. 磁盘读写时间</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-2-%E7%A3%81%E7%9B%98%E7%9A%84%E9%A9%B1%E5%8A%A8%E8%B0%83%E5%BA%A6"><span class="nav-text">4.4.2 磁盘的驱动调度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-3-%E6%97%8B%E8%BD%AC%E8%B0%83%E5%BA%A6"><span class="nav-text">4.4.3 旋转调度</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%BE%AA%E7%8E%AF%E6%8E%92%E5%BA%8F"><span class="nav-text">1. 循环排序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E4%BC%98%E5%8C%96%E5%88%86%E5%B8%83"><span class="nav-text">2. 优化分布</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-4-%E7%A7%BB%E8%87%82%E8%B0%83%E5%BA%A6"><span class="nav-text">4.4.4 移臂调度</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%85%88%E6%9D%A5%E5%85%88%E6%9C%8D%E5%8A%A1FCFS"><span class="nav-text">1.  先来先服务FCFS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E6%9C%80%E7%9F%AD%E6%9F%A5%E6%89%BE%E6%97%B6%E9%97%B4%E4%BC%98%E5%85%88SSTF"><span class="nav-text">2. 最短查找时间优先SSTF</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E6%89%AB%E6%8F%8F%E7%AE%97%E6%B3%95SCAN"><span class="nav-text">3. 扫描算法SCAN</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-LOOK%E7%AE%97%E6%B3%95"><span class="nav-text">4. LOOK算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E5%BE%AA%E7%8E%AF%E6%89%AB%E6%8F%8FC-SCAN"><span class="nav-text">5. 循环扫描C-SCAN</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-C-LOOK%E7%AE%97%E6%B3%95"><span class="nav-text">6. C-LOOK算法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-5-%E6%8F%90%E9%AB%98%E7%A3%81%E7%9B%98I-x2F-O%E9%80%9F%E5%BA%A6%E7%9A%84%E5%8A%9E%E6%B3%95"><span class="nav-text">4.4.5 提高磁盘I&#x2F;O速度的办法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-6-%E7%A3%81%E7%9B%98%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E9%98%B5%E5%88%97"><span class="nav-text">4.4.6 磁盘循环冗余阵列</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-RAID-0"><span class="nav-text">1. RAID 0</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-RAID-1"><span class="nav-text">2. RAID 1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-RAID-2"><span class="nav-text">3. RAID 2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-RAID-3"><span class="nav-text">4. RAID 3</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-RAID-4"><span class="nav-text">5. RAID 4</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-RAID-5"><span class="nav-text">6. RAID 5</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-RAID-6"><span class="nav-text">7. RAID 6</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-RAID%E7%BA%A7%E5%88%AB%E6%80%BB%E7%BB%93"><span class="nav-text">8. RAID级别总结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-7-%E7%A3%81%E7%9B%98Cache"><span class="nav-text">4.4.7 磁盘Cache</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-5-%E8%99%9A%E6%8B%9F%E8%AE%BE%E5%A4%87"><span class="nav-text">4.5 虚拟设备</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-1-SPOOLing%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0"><span class="nav-text">4.5.1. SPOOLing系统的设计与实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-2-%E8%BE%93%E5%85%A5%E4%BA%95%E7%9A%84%E4%BD%9C%E4%B8%9A%E7%8A%B6%E6%80%81"><span class="nav-text">4.5.2 输入井的作业状态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-3-%E6%89%93%E5%8D%B0%E6%9C%BASPOOLing"><span class="nav-text">4.5.3. 打印机SPOOLing</span></a></li></ol></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>



    
<script src="/js/local-search.js"></script>




    
<script src="/js/code-copy.js"></script>





<div class="post-scripts">
    
        
<script src="/js/left-side-toggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/toc.js"></script>

    
</div>



</body>
</html>
